(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"+/dU":function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var o=n("hfKm"),r=n.n(o),a=n("2Eek"),i=n.n(a),s=n("XoMD"),c=n.n(s),u=n("Jo+v"),l=n.n(u),d=n("4mXO"),p=n.n(d),f=n("pLtp"),h=n.n(f),v=n("Cg2A"),g=n.n(v),m=n("vYYK"),y=n("dfwq"),w=n("doui"),b=n("q1tI"),A=n("tZOq"),E=n("VoYB"),x=n("FeTO");function O(e,t){var n=h()(e);if(p.a){var o=p()(e);t&&(o=o.filter((function(t){return l()(e,t).enumerable}))),n.push.apply(n,o)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):c.a?i()(e,c()(n)):O(Object(n)).forEach((function(t){r()(e,t,l()(n,t))}))}return e}function _(e,t){var n=t.onReceiveAnnotationUpdate,o=void 0===n?function(){}:n,r=Object(E.a)().showError,a=b.useState(null),i=Object(w.a)(a,2),s=i[0],c=i[1],u=Object(A.M)({variables:{replId:e}}),l=function(){var e,t=null===(e=u.data)||void 0===e?void 0:e.currentUser;return t?{user:{__typename:"User",id:t.id,username:t.username,image:t.image}}:{}},d=function(t,n){var o=t.readQuery({query:A.f,variables:{replId:e}}),r=[],a=o.repl.annotationAnchors,i=a.findIndex((function(e){return e.id===n.id}));r=-1===i?[].concat(Object(y.a)(a),[n]):[].concat(Object(y.a)(a.slice(0,i)),[n],Object(y.a)(a.slice(i+1))),t.writeQuery({query:A.f,variables:{replId:e},data:j({},o,{repl:j({},o.repl,{annotationAnchors:r})})})},p=Object(A.U)({onError:function(e){return r(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return r(e.message)}));else{var o=null===(n=t.data)||void 0===n?void 0:n.createAnnotationAnchor;o&&("UserError"===o.__typename?r(o.message):"AnnotationAnchor"===o.__typename&&d(e,o))}}}),f=Object(w.a)(p,1)[0],h=Object(A.V)({onError:function(e){return r(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return r(e.message)}));else{var o=null===(n=t.data)||void 0===n?void 0:n.createAnnotationMessage;o&&("UserError"===o.__typename?r(o.message):"AnnotationAnchor"===o.__typename&&(d(e,o),Object(x.b)(o)))}}}),v=Object(w.a)(h,1)[0],m=Object(A.jd)({onError:function(e){return r(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return r(e.message)}));else{var o=null===(n=t.data)||void 0===n?void 0:n.updateAnchorMutation;o&&("UserError"===o.__typename?r(o.message):"AnnotationAnchor"===o.__typename&&d(e,o))}}}),O=Object(w.a)(m,1)[0];Object(A.P)({variables:{replId:e},onSubscriptionData:function(e){var t=e.subscriptionData.data,n=e.client,r=null===t||void 0===t?void 0:t.updatedAnnotation;r&&(d(n,r),o(r))}});var _=b.useState([]),M=Object(w.a)(_,2),z=M[0],C=M[1];b.useEffect((function(){var e,t=[];"Repl"===(null===(e=u.data)||void 0===e?void 0:e.repl.__typename)&&t.push.apply(t,Object(y.a)(u.data.repl.annotationAnchors)),s&&t.push(j({},s,{messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),C(t)}),[u,s]);var S=function(e){var t=e.annotationAnchor,n=e.annotationMessage,o=e.highlight;f({variables:{annotationAnchor:t,annotationMessage:n,highlight:o},optimisticResponse:{createAnnotationAnchor:j({},l(),{},t,{__typename:"AnnotationAnchor",messages:n?[j({},l(),{},n,{__typename:"AnnotationMessage",timeCreated:g()(),currentUserIsAuthor:!0})]:[],isResolved:!1})}})};return{annotations:z,placeholderAnchorId:null===s||void 0===s?void 0:s.id,createAnnotationAnchorPlaceholder:function(e){var t=e.annotationAnchor;c(t)},deleteAnnotationAnchorPlaceholder:function(){c(null)},createAnnotationAnchor:S,createAnnotationMessage:function(t){var n=t.anchor,o=t.annotationMessage,r=t.highlight;(null===s||void 0===s?void 0:s.id)===n.id?(c(null),S({annotationAnchor:j({},s),annotationMessage:o,highlight:r})):v({variables:{replId:e,anchorId:n.id,annotationMessage:o,highlight:r},optimisticResponse:{createAnnotationMessage:j({},n,{messages:[].concat(Object(y.a)(n.messages),[j({},l(),{},o,{__typename:"AnnotationMessage",timeCreated:g()(),currentUserIsAuthor:!0})])})}})},updateAnnotationAnchor:function(e){var t=e.annotationAnchor,n=e.changes;O({variables:{id:t.id,changes:n},optimisticResponse:{updateAnnotationAnchor:j({},t,{},n,{isResolved:"boolean"===typeof n.isResolved?n.isResolved:t.isResolved})}})}}}},DqZZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("q1tI"),r=n.n(o),a=n("GemG"),i=n.n(a);function s(e){r.a.useEffect((function(){return e.current&&i()(e.current),function(){e.current&&i.a.destroy(e.current)}}),[e.current])}},FeTO:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var o=n("9Jkg"),r=n.n(o),a="annotations/lastRead";function i(e){if(e.messages){var t=e.messages[e.messages.length-1];if(t){var n=JSON.parse(window.localStorage.getItem(a)||"{}");n[e.id]=new Date(t.timeCreated).getTime(),window.localStorage.setItem(a,r()(n))}}}function s(e){if(!e.messages)return!0;var t=e.messages[e.messages.length-1];return!t||JSON.parse(window.localStorage.getItem(a)||"{}")[e.id]>=new Date(t.timeCreated).getTime()}},GemG:function(e,t,n){var o,r,a;r=[e,t],void 0===(a="function"===typeof(o=function(e,t){"use strict";var n="function"===typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(n){return t[e.indexOf(n)]},set:function(n,o){-1===e.indexOf(n)&&(e.push(n),t.push(o))},delete:function(n){var o=e.indexOf(n);o>-1&&(e.splice(o,1),t.splice(o,1))}}}(),o=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(c){o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function r(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!n.has(e)){var t=null,r=null,a=null,i=function(){e.clientWidth!==r&&l()},s=function(t){window.removeEventListener("resize",i,!1),e.removeEventListener("input",l,!1),e.removeEventListener("keyup",l,!1),e.removeEventListener("autosize:destroy",s,!1),e.removeEventListener("autosize:update",l,!1),Object.keys(t).forEach((function(n){e.style[n]=t[n]})),n.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",s,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",l,!1),window.addEventListener("resize",i,!1),e.addEventListener("input",l,!1),e.addEventListener("autosize:update",l,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",n.set(e,{destroy:s,update:l}),function(){var n=window.getComputedStyle(e,null);"vertical"===n.resize?e.style.resize="none":"both"===n.resize&&(e.style.resize="horizontal"),t="content-box"===n.boxSizing?-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),isNaN(t)&&(t=0),l()}()}function c(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function u(){if(0!==e.scrollHeight){var n=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",r=e.clientWidth,n.forEach((function(e){e.node.scrollTop=e.scrollTop})),o&&(document.documentElement.scrollTop=o)}}function l(){u();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),r="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(r<t?"hidden"===n.overflowY&&(c("scroll"),u(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(c("hidden"),u(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),a!==r){a=r;var i=o("autosize:resized");try{e.dispatchEvent(i)}catch(s){}}}}function a(e){var t=n.get(e);t&&t.destroy()}function i(e){var t=n.get(e);t&&t.update()}var s=null;"undefined"===typeof window||"function"!==typeof window.getComputedStyle?((s=function(e){return e}).destroy=function(e){return e},s.update=function(e){return e}):((s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return r(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],a),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e}),t.default=s,e.exports=t.default})?o.apply(t,r):o)||(e.exports=a)},xSuc:function(e,t,n){"use strict";var o=n("MX0m"),r=n.n(o),a=n("q1tI"),i=a.createElement;t.a=function(e){var t=e.unreadDot;return i("span",{className:"jsx-2142368589"},i("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-2142368589"},i("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-2142368589"})),t&&i("div",{className:"jsx-2142368589 unread-indicator"}),i(r.a,{id:"2142368589"},["span.jsx-2142368589{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".unread-indicator.jsx-2142368589{width:5px;height:5px;border-radius:10px;background-color:var(--color-multiplayer-red);-webkit-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute;}"]))}}}]);
//# sourceMappingURL=93a59a3a7efd8009f7ff59e63a6ea1a908eb2d84.f8462f7cf704fde484e1.js.map